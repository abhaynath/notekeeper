<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/font-awesome-4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../../js/libs/highlight/styles/devibeans.min.css" />
    <script src="../../js/libs/highlight/highlight.min.js"></script>
    <script src="../../js/libs/jquery.min.js"></script>
    <title>File IO</title>
  </head>

  <body>
    <nav class="nav_main">
      <a href="../../index.html"><i class="fa fa-home"></i></a>
      <a href="python_index.html">Python</a>
    </nav>
    <div class="content">
      <section id="basic">
        <h4>Flags</h4>
        <p>The key function for working with files in Python is the <span class="keyword">open()</span> function.</p>
        <p>The <span class="keyword">open()</span> function takes two parameters; filename, and mode.</p>
        <p>There are four different methods (modes) for opening a file</p>

        <table>
          <tr>
            <th>Flag</th>
            <th>Mode</th>
            <th>Details</th>
          </tr>
          <tr>
            <td>r</td>
            <td>Read</td>
            <td>Default value. Opens a file for reading, error if the file does not exist</td>
          </tr>

          <tr>
            <td>a</td>
            <td>Append</td>
            <td>Opens a file for appending, creates the file if it does not exist</td>
          </tr>

          <tr>
            <td>w</td>
            <td>Write</td>
            <td>Opens a file for writing, creates the file if it does not exist</td>
          </tr>

          <tr>
            <td>x</td>
            <td>Create</td>
            <td>Creates the specified file, returns an error if the file exists</td>
          </tr>
        </table>
        <p>In addition you can specify if the file should be handled as binary or text mode</p>

        <table>
          <tr>
            <th>Flag</th>
            <th>Mode</th>
            <th>Details</th>
          </tr>
          <tr>
            <td>t</td>
            <td>Text</td>
            <td>Default value. Text mode</td>
          </tr>

          <tr>
            <td>b</td>
            <td>Binary</td>
            <td>Binary mode (e.g. images)</td>
          </tr>
        </table>
      </section>

      <section id="">
        <h4>Reading file</h4>
        <p>The <span class="keyword">open()</span> function returns a file object, which has a read() method for reading the content of the file</p>

        <pre><code class="language-py">
f = open(&#x22;F:\\test.txt&#x22;, &#x22;r&#x22;)
print(f.read())
f.close()</code></pre>

        <h4>Read only part of file</h4>

        <p>By default the read() method returns the whole text, but you can also specify how many characters you want to return</p>
        <pre><code class="language-py">
f = open(&#x22;F:\\test.txt&#x22;, &#x22;r&#x22;)
print(f.read(5))
f.close()</code></pre>

        <h4>Reading lines</h4>
        <p>You can return one line by using the readline() method</p>
        <pre><code class="language-py">
f = open(&#x22;F:\\test.txt&#x22;, &#x22;r&#x22;)
print(f.readline())
f.close()</code></pre>
      </section>

      <section id="file">
        <h4>Read the file line by line</h4>
        <p>By looping through the lines of the file, you can read the whole file, line by line</p>
        <pre><code class="language-py">
f = open(&#x22;F:\\test.txt&#x22;, &#x22;r&#x22;)
for line in f:
    print(line)

f.close()</code></pre>
      </section>

      <section id="writetofile">
        <h4>Write to an Existing File</h4>
        <p>To write to an existing file, you must add a parameter to the <span class="keyword">open()</span> function</p>
        <table>
          <tr>
            <th>Flag</th>
            <th>Mode</th>
            <th>Details</th>
          </tr>
          <tr>
            <td>a</td>
            <td>Append</td>
            <td>will append to the end of the file</td>
          </tr>
          <tr>
            <td>w</td>
            <td>Write</td>
            <td>will overwrite any existing content</td>
          </tr>
        </table>
        <p>Following code appends timestamps in the file.</p>
        <pre><code class="language-py">
import datetime

current_time = datetime.datetime.now()
timestamp = str(current_time)

f = open(&#x22;F:\\test.txt&#x22;, &#x22;a&#x22;)
f.write(timestamp+&#x22;\n&#x22;)
f.close()</code></pre>
      </section>

      <section id="newfile">
        <h4>Create new file</h4>
        <p>To create a new file in Python, use the <span class="keyword">open()</span> method, with one of the following parameters</p>

        <table>
          <tr>
            <th>Flag</th>
            <th>Mode</th>
            <th>Details</th>
          </tr>
          <tr>
            <td>x</td>
            <td>Create</td>
            <td>will create a file, returns an error if the file exist</td>
          </tr>

          <tr>
            <td>a</td>
            <td>Append</td>
            <td>will create a file if the specified file does not exist</td>
          </tr>

          <tr>
            <td>w</td>
            <td>Write</td>
            <td>will create a file if the specified file does not exist</td>
          </tr>
        </table>
        <p>Following program creates the python object, writes it to the json file and then it reads it again.</p>
        <pre><code class="language-py">
import json
import datetime


config = {
    &#x27;userId&#x27;: &#x22;A101G&#x22;,
    &#x27;password&#x27;: &#x22;abc123&#x22;,
    &#x27;ip&#x27;: &#x27;172.31.16.71&#x27;,
    &#x27;max_connections&#x27;: 1000,
    &#x27;domain&#x27;: &#x27;software.com&#x27;,
    &#x27;isActive&#x27;: True,
    &#x27;users_list&#x27;: [&#x22;abhay&#x22;, &#x22;sachin&#x22;, &#x22;nazma&#x22;],
    &#x27;server_details&#x27;: None
}

# get current timestamp
current_time = datetime.datetime.now()
timestamp = str(current_time)

# set last modified timestamp
config[&#x27;last_modified&#x27;] = timestamp
print(config)

# convert object to json string
strJson = json.dumps(config)
print(strJson)

# writes the json string to file
filePath = &#x22;F:\\config.json&#x22;
f = open(filePath, &#x22;w&#x22;)
f.write(strJson)
f.close()


# read the contents of the file
f = open(filePath, &#x22;r&#x22;)
strConfig = f.read()
f.close()

# convert the string json to object
newConfig = json.loads(strConfig)
print(newConfig)</code></pre>
      </section>

      <section id="delete">
        <h4>Delete File</h4>
        <p>To delete a file, you must import the <b>OS</b> module, and run its <span class="keyword">os.remove()</span> function</p>
        <pre><code class="language-py">
import os

filePath = &#x22;F:\\test.txt&#x22;
if os.path.exists(filePath):
    os.remove(filePath)
    print(&#x22;File deleted&#x22;)
else:
    print(&#x22;The file does not exist&#x22;)</code></pre>
      </section>

      <section id="deleteFolder">
        <h4>Delete Folder</h4>
        <b>You can only remove empty folders.</b>
        <pre><code class="language-py">
import os

folderPath = &#x22;F:\\myfolder&#x22;

if os.path.exists(folderPath):
    os.rmdir(folderPath)
    print(&#x22;Folder deleted successfully&#x22;)
else:
    print(&#x22;Folder not found&#x22;)</code></pre>
      </section>
    </div>
  </body>

  <script>
    hljs.highlightAll();
  </script>
</html>
